## 添加自定义命令



### 一、制作脚本

- 创建/home/jxye/my_cmds目录，把自定义的脚本放入该目录下面
- 创建脚本文件，例如 total-os.sh，用来统计服务器CPU、memery、disk的使用率
  
  ```shell

  #!/bin/bash
  #This script is use for describle CPU Hard Memery Utilization
  total=0
  idle=0
  system=0
  user=0
  nice=0
  mem=0
  vmexec=/usr/bin/vmstat
  which sar > /dev/null 2>&1
  if [ $? -ne 0 ]
  then
    ver=`vmstat -V | awk '{printf $3}'`
    nice=0
    temp=`vmstat 1 3 |tail -1`
    user=`echo $temp |awk '{printf("%s\n",$13)}'`
    system=`echo $temp |awk '{printf("%s\n",$14)}'`
    idle=`echo $temp |awk '{printf("%s\n",$15)}'`
    total=`echo|awk '{print (c1+c2)}' c1=$system c2=$user`
  fi
  echo "#CPU Utilization#"
  echo "Total CPU  is already use: $total"
  echo "CPU user   is already use: $user"
  echo "CPU system is already use: $system"
  echo "CPU nice   is already use: $nice"
  echo "CPU idle   is already use: $idle"
  echo
  root_use=$(df -lh | awk 'NR==2' | awk '{print $5}')
  dev_use=$(df -lh | awk 'NR==3' | awk '{print $5}')
  dev_shm_use=$(df -lh | awk 'NR==4' | awk '{print $5}')
  echo "#Hard Utilization#"
  echo "/        is already use: $root_use"
  echo "/dev     is already use: $dev_use"
  echo "/dev/shm is already use: $dev_shm_use"
  echo
  memery_used=$(free | awk 'NR==2' | awk '{print $3}')
  memery_all=$(free | awk 'NR==2' | awk '{print $2}')
  memery_percent=$(echo "scale=4;$memery_used / $memery_all" | bc)
  percent_part1=$(echo $memery_percent | cut -c 2-3)
  percent_part2=$(echo $memery_percent | cut -c 4-5)
  echo "#Memery Utilization#"
  echo "system memery is already use: $percent_part1.$percent_part2%"
  swap_used=$(free | awk 'NR==4' | awk '{print $3}')
  swap_all=$(free | awk 'NR==4' | awk '{print $2}')
  swap_percent=$(echo "scale=4;$swap_used / $swap_all" | bc)
  swap_part1=$(echo $swap_percent | cut -c 2-3)
  swap_part2=$(echo $swap_percent | cut -c 4-5)
  echo "swap   memery is already use: $swap_part1.$swap_part2%"
  echo

  ```

- 分配权限
  ```shell
  chmod 777 total-os.sh
  ```



### 二、配置环境变量

- 编辑 /etc/profile 文件，把脚本所在的目录，例如  /home/jxye/my_cmds  配置到path环境变量下
  ```shell
  vim /etc/profile
  ```

- 输入shift+i进入插入模式，对path环境编辑进行编辑

  ```shell
  export PATH=$JAVA_HOME/bin:/home/jxye/my_cmds:$PATH
  ```

- 使环境变量生效
  ```shell
  source /etc/profile
  ```

- 直接使用命令来验证
  ```shell
  total-os.sh
  ```